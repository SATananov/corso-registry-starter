<!DOCTYPE html>
<html lang="bg">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Listings Starter (Users / Admins / Photos)</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
<header class="topbar">
  <div class="brand">
    <strong>Listings Starter</strong>
    <span class="tag">Users · Admins · Photos</span>
  </div>
  <nav class="nav">
    <a href="index.html">Начало</a>
    <a href="login.html">Вход</a>
    <a class="btn" href="register.html">Регистрация</a>
  </nav>
</header>

<main class="container">
  <section class="card">
    <h1>Добре дошли</h1>
    <p>Това е празен стартов проект. След секунди ще тестваме връзката със Supabase.</p>
    <div class="muted">DB статус: <span id="ping">проверявам…</span></div>
  </section>

  <section class="card">
    <h2>Какво следва</h2>
    <ol>
      <li>Auth (регистрация, вход, профил)</li>
      <li>Роли (admin) + админ панел</li>
      <li>Списъци (listings) с одобрение</li>
      <li>Снимки (публичен преглед, качване от потребители)</li>
    </ol>
  </section>
</main>

<footer class="footer">© 2025 Starter · MIT</footer>

<script type="module">
  import { supabase } from './js/api.js';
  const el = document.getElementById('ping');
  try {
    // публично четене на profiles (ще го позволим със SQL по-долу)
    const { error } = await supabase
      .from('profiles')
      .select('id', { head: true, count: 'exact' })
      .limit(1);
    el.textContent = error ? ('грешка: ' + error.message) : 'OK';
  } catch (e) {
    el.textContent = 'грешка: ' + (e?.message || e);
  }
</script>
</body>
</html>
