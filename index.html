<!DOCTYPE html>
<html lang="bg">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Listings Starter (Users / Admins / Photos)</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
<header class="topbar">
  <div class="brand">
    <strong>Listings Starter</strong>
    <span class="tag">Users · Admins · Photos</span>
  </div>
  <nav class="nav">
    <a href="index.html">Начало</a>
    <a data-if-anon href="login.html">Вход</a>
    <a data-if-anon class="btn" href="register.html">Регистрация</a>
    <a data-if-authed href="profile.html">Профил</a>
    <a data-if-authed href="#" data-logout>Изход</a>
  </nav>
</header>

<main class="container">
  <section class="card">
    <h1>Добре дошли</h1>
    <p>Това е стартов проект. По-долу тестваме връзката със Supabase.</p>
    <div class="muted">DB статус: <span id="ping">проверявам…</span></div>
  </section>

  <section class="card">
    <h2>Какво предстои</h2>
    <ol>
      <li>Auth (регистрация, вход, профил)</li>
      <li>Роли (admin) + админ панел</li>
      <li>Потребителско съдържание (submit → approve)</li>
      <li>Снимки (Storage) + каталози</li>
    </ol>
  </section>
</main>

<footer class="footer">© 2025 Starter · MIT</footer>

<script type="module">
  import { supabase } from './js/api.js';
  import { bootstrap } from './js/app.js';
  bootstrap();
  const el = document.getElementById('ping');
  try {
    const { error } = await supabase.from('profiles').select('id', { head:true, count:'exact' }).limit(1);
    el.textContent = error ? ('грешка: ' + error.message) : 'OK';
  } catch (e) {
    el.textContent = 'грешка: ' + (e?.message || e);
  }
</script>
</body>
</html>
